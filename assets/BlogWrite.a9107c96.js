import{b as o,r as e,I as t,J as s,q as a,h as n,e as r,g as i,H as l,n as u,v as c,aG as d,z as f,_ as m,c as p,a as v,j as b,w as y,o as g,Q as h}from"./index.fa604b75.js";import{Q as x}from"./QInput.f1b212ba.js";import"./index.2bd8ddc8.js";import"./use-key-composition.b324ef3a.js";const S=o({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(o,{slots:m,emit:p}){const v=i(),b=e(null);let y=0;const g=[];function h(e){const t=[],s="boolean"==typeof e?e:!0!==o.noErrorFocus,a=++y,n=(o,e)=>{p("validation-"+(!0===o?"success":"error"),e)};for(let r=0;r<g.length;r++){const e=g[r],a=e.validate();if("function"==typeof a.then)t.push(a.then((o=>({valid:o,comp:e})),(o=>({valid:!1,comp:e,err:o}))));else if(!0!==a){if(!1===o.greedy)return n(!1,e),!0===s&&"function"==typeof e.focus&&e.focus(),Promise.resolve(!1);t.push({valid:!1,comp:e})}}return 0===t.length?(n(!0),Promise.resolve(!0)):Promise.all(t).then((o=>{const e=o.filter((o=>!0!==o.valid));if(0===e.length)return a===y&&n(!0),!0;const{valid:t,comp:r,err:i}=e[0];return a===y&&(n(!1,r),!0===s&&!0!==t&&"function"==typeof r.focus&&r.focus()),!1}))}function x(){y++,g.forEach((o=>{"function"==typeof o.resetValidation&&o.resetValidation()}))}function S(e){void 0!==e&&l(e);const t=y+1;h().then((s=>{t===y&&!0===s&&(void 0!==o.onSubmit?p("submit",e):void 0!==e&&void 0!==e.target&&"function"==typeof e.target.submit&&e.target.submit())}))}function q(e){void 0!==e&&l(e),p("reset"),u((()=>{x(),!0===o.autofocus&&!0!==o.noResetFocus&&V()}))}function V(){c((()=>{if(null===b.value)return;const o=b.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(b.value.querySelectorAll("[tabindex]"),(o=>o.tabIndex>-1));null!=o&&o.focus({preventScroll:!0})}))}d(f,{bindComponent(o){g.push(o)},unbindComponent(o){const e=g.indexOf(o);e>-1&&g.splice(e,1)}});let j=!1;return t((()=>{j=!0})),s((()=>{!0===j&&!0===o.autofocus&&V()})),a((()=>{!0===o.autofocus&&V()})),Object.assign(v.proxy,{validate:h,resetValidation:x,submit:S,reset:q,focus:V,getValidationComponents:()=>g}),()=>n("form",{class:"q-form",ref:b,onSubmit:S,onReset:q},r(m.default))}}),q={class:"q-pa-md",style:{"max-width":"600px"}},V={class:"row"},j={class:"q-gutter-md"},F={class:"row"},_={class:"q-gutter-md"},w=m({__name:"BlogWrite",setup(o){e(),e();const t=e("");return e(!0),(o,e)=>(g(),p("div",q,[v("div",V,[v("div",j,[b(h,{label:"저장",color:"primary"}),b(h,{label:"저장",color:"primary"})])]),v("div",F,[v("div",_,[b(S,{onSubmit:o.onSubmit,class:"q-gutter-md"},{default:y((()=>[b(x,{outlined:"",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o),autogrow:"",dense:":dense"},null,8,["modelValue"])])),_:1},8,["onSubmit"])])]),v("div",null,[b(h,{label:"저장",type:"submit",color:"primary"})])]))}},[["__scopeId","data-v-3de61797"]]);export{w as default};
