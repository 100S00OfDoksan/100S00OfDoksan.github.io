import{u as e,a as t,b as a,c as n,d as l,e as o,f as r,g as s}from"./use-key-composition.e004978b.js";import{r as i,g as u,n as d,s as c,h as f,i as v,j as g,k as p,l as h,m,p as w,q as y,u as k,v as x,x as b}from"./index.e46f2d73.js";const M={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},S={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},C=Object.keys(S);C.forEach((e=>{S[e].regex=new RegExp(S[e].pattern)}));const R=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+C.join("")+"])|(.)","g"),V=/[.*+?^${}()|[\]\\]/g,q=String.fromCharCode(1);function A(e,t,a,n){let l,o,r,s;const f=i(null),v=i(function(){if(p(),!0===f.value){const t=w(y(e.modelValue));return!1!==e.fillMask?k(t):t}return e.modelValue}());function g(e){if(e<l.length)return l.slice(-e);let t="",a=l;const n=a.indexOf(q);if(n>-1){for(let n=e-a.length;n>0;n--)t+=q;a=a.slice(0,n)+t+a.slice(n)}return a}function p(){if(f.value=void 0!==e.mask&&e.mask.length>0&&(!0===e.autogrow||["textarea","text","search","url","tel","password"].includes(e.type)),!1===f.value)return s=void 0,l="",void(o="");const t=void 0===M[e.mask]?e.mask:M[e.mask],a="string"==typeof e.fillMask&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",n=a.replace(V,"\\$&"),i=[],u=[],d=[];let c=!0===e.reverseFillMask,v="",g="";t.replace(R,((e,t,a,n,l)=>{if(void 0!==n){const e=S[n];d.push(e),g=e.negate,!0===c&&(u.push("(?:"+g+"+)?("+e.pattern+"+)?(?:"+g+"+)?("+e.pattern+"+)?"),c=!1),u.push("(?:"+g+"+)?("+e.pattern+")?")}else if(void 0!==a)v="\\"+("\\"===a?"":a),d.push(a),i.push("([^"+v+"]+)?"+v+"?");else{const e=void 0!==t?t:l;v="\\"===e?"\\\\\\\\":e.replace(V,"\\\\$&"),d.push(e),i.push("([^"+v+"]+)?"+v+"?")}}));const p=new RegExp("^"+i.join("")+"("+(""===v?".":"[^"+v+"]")+"+)?$"),h=u.length-1,m=u.map(((t,a)=>0===a&&!0===e.reverseFillMask?new RegExp("^"+n+"*"+t):a===h?new RegExp("^"+t+"("+(""===g?".":g)+"+)?"+(!0===e.reverseFillMask?"$":n+"*")):new RegExp("^"+t)));r=d,s=e=>{const t=p.exec(e);null!==t&&(e=t.slice(1).join(""));const a=[],n=m.length;for(let l=0,o=e;l<n;l++){const e=m[l].exec(o);if(null===e)break;o=o.slice(e.shift().length),a.push(...e)}return a.length>0?a.join(""):e},l=d.map((e=>"string"==typeof e?e:q)).join(""),o=l.split(q).join(a)}function h(t,r,s){const i=n.value,u=i.selectionEnd,c=i.value.length-u,f=y(t);!0===r&&p();const g=w(f),h=!1!==e.fillMask?k(g):g,x=v.value!==h;i.value!==h&&(i.value=h),!0===x&&(v.value=h),document.activeElement===i&&d((()=>{if(h!==o)if("insertFromPaste"!==s||!0===e.reverseFillMask)if(["deleteContentBackward","deleteContentForward"].indexOf(s)>-1){const t=!0===e.reverseFillMask?0===u?h.length>g.length?1:0:Math.max(0,h.length-(h===o?0:Math.min(g.length,c)+1))+1:u;i.setSelectionRange(t,t,"forward")}else if(!0===e.reverseFillMask)if(!0===x){const e=Math.max(0,h.length-(h===o?0:Math.min(g.length,c+1)));1===e&&1===u?i.setSelectionRange(e,e,"forward"):m.rightReverse(i,e,e)}else{const e=h.length-c;i.setSelectionRange(e,e,"backward")}else if(!0===x){const e=Math.max(0,l.indexOf(q),Math.min(g.length,u)-1);m.right(i,e,e)}else{const e=u-1;m.right(i,e,e)}else{const e=u-1;m.right(i,e,e)}else{const t=!0===e.reverseFillMask?o.length:0;i.setSelectionRange(t,t,"forward")}}));const b=!0===e.unmaskedValue?y(h):h;String(e.modelValue)!==b&&a(b,!0)}u((()=>e.type+e.autogrow),p),u((()=>e.mask),(a=>{if(void 0!==a)h(v.value,!0);else{const a=y(v.value);p(),e.modelValue!==a&&t("update:modelValue",a)}})),u((()=>e.fillMask+e.reverseFillMask),(()=>{!0===f.value&&h(v.value,!0)})),u((()=>e.unmaskedValue),(()=>{!0===f.value&&h(v.value)}));const m={left(e,t,a,n){const o=-1===l.slice(t-1).indexOf(q);let r=Math.max(0,t-1);for(;r>=0;r--)if(l[r]===q){t=r,!0===o&&t++;break}if(r<0&&void 0!==l[t]&&l[t]!==q)return m.right(e,0,0);t>=0&&e.setSelectionRange(t,!0===n?a:t,"backward")},right(e,t,a,n){const o=e.value.length;let r=Math.min(o,a+1);for(;r<=o;r++){if(l[r]===q){a=r;break}l[r-1]===q&&(a=r)}if(r>o&&void 0!==l[a-1]&&l[a-1]!==q)return m.left(e,o,o);e.setSelectionRange(n?t:a,a,"forward")},leftReverse(e,t,a,n){const l=g(e.value.length);let o=Math.max(0,t-1);for(;o>=0;o--){if(l[o-1]===q){t=o;break}if(l[o]===q&&(t=o,0===o))break}if(o<0&&void 0!==l[t]&&l[t]!==q)return m.rightReverse(e,0,0);t>=0&&e.setSelectionRange(t,!0===n?a:t,"backward")},rightReverse(e,t,a,n){const l=e.value.length,o=g(l),r=-1===o.slice(0,a+1).indexOf(q);let s=Math.min(l,a+1);for(;s<=l;s++)if(o[s-1]===q){(a=s)>0&&!0===r&&a--;break}if(s>l&&void 0!==o[a-1]&&o[a-1]!==q)return m.leftReverse(e,l,l);e.setSelectionRange(!0===n?t:a,a,"forward")}};function w(t){if(null==t||""===t)return"";if(!0===e.reverseFillMask)return function(e){const t=r,a=l.indexOf(q);let n=e.length-1,o="";for(let l=t.length-1;l>=0&&n>-1;l--){const r=t[l];let s=e[n];if("string"==typeof r)o=r+o,s===r&&n--;else{if(void 0===s||!r.regex.test(s))return o;do{o=(void 0!==r.transform?r.transform(s):s)+o,n--,s=e[n]}while(a===l&&void 0!==s&&r.regex.test(s))}}return o}(t);const a=r;let n=0,o="";for(let e=0;e<a.length;e++){const l=t[n],r=a[e];if("string"==typeof r)o+=r,l===r&&n++;else{if(void 0===l||!r.regex.test(l))return o;o+=void 0!==r.transform?r.transform(l):l,n++}}return o}function y(e){return"string"!=typeof e||void 0===s?"number"==typeof e?s(""+e):e:s(e)}function k(t){return o.length-t.length<=0?t:!0===e.reverseFillMask&&t.length>0?o.slice(0,-t.length)+t:t+o.slice(t.length)}return{innerValue:v,hasMask:f,moveCursorForPaste:function(e,t,a){const n=w(y(e.value));t=Math.max(0,l.indexOf(q),Math.min(n.length,t)),e.setSelectionRange(t,a,"forward")},updateMaskValue:h,onMaskedKeydown:function(t){if(!0===c(t))return;const a=n.value,l=a.selectionStart,o=a.selectionEnd;if(37===t.keyCode||39===t.keyCode){const n=m[(39===t.keyCode?"right":"left")+(!0===e.reverseFillMask?"Reverse":"")];t.preventDefault(),n(a,l,o,t.shiftKey)}else 8===t.keyCode&&!0!==e.reverseFillMask&&l===o?m.left(a,l,o,!0):46===t.keyCode&&!0===e.reverseFillMask&&l===o&&m.rightReverse(a,l,o,!0)}}}const F=v({name:"QInput",inheritAttrs:!1,props:{...e,...{mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean},...t,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...a,"paste","change"],setup(e,{emit:t,attrs:a}){const c={};let v,k,x,b,M=NaN;const S=i(null),C=n(e),{innerValue:R,hasMask:V,moveCursorForPaste:q,updateMaskValue:F,onMaskedKeydown:E}=A(e,t,P,S),O=function(e,t){function a(){const t=e.modelValue;try{const e="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(t)===t&&("length"in t?Array.from(t):[t]).forEach((t=>{e.items.add(t)})),{files:e.files}}catch(a){return{files:void 0}}}return f(!0===t?()=>{if("file"===e.type)return a()}:a)}(e,!0),j=f((()=>r(R.value))),z=s(L),B=l(),T=f((()=>"textarea"===e.type||!0===e.autogrow)),Z=f((()=>!0===T.value||["text","search","url","tel","password"].includes(e.type))),_=f((()=>{const t={...B.splitAttrs.listeners.value,onInput:L,onPaste:$,onChange:K,onBlur:Q,onFocus:w};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=z,!0===V.value&&(t.onKeydown=E),!0===e.autogrow&&(t.onAnimationend=D),t})),N=f((()=>{const t={tabindex:0,"data-autofocus":!0===e.autofocus||void 0,rows:"textarea"===e.type?6:void 0,"aria-label":e.label,name:C.value,...B.splitAttrs.attributes.value,id:B.targetUid.value,maxlength:e.maxlength,disabled:!0===e.disable,readonly:!0===e.readonly};return!1===T.value&&(t.type=e.type),!0===e.autogrow&&(t.rows=1),t}));function $(a){if(!0===V.value&&!0!==e.reverseFillMask){const e=a.target;q(e,e.selectionStart,e.selectionEnd)}t("paste",a)}function L(a){if(!a||!a.target)return;if("file"===e.type)return void t("update:modelValue",a.target.files);const n=a.target.value;if(!0!==a.target.qComposing){if(!0===V.value)F(n,!1,a.inputType);else if(P(n),!0===Z.value&&a.target===document.activeElement){const{selectionStart:e,selectionEnd:t}=a.target;void 0!==e&&void 0!==t&&d((()=>{a.target===document.activeElement&&0===n.indexOf(a.target.value)&&a.target.setSelectionRange(e,t)}))}!0===e.autogrow&&D()}else c.value=n}function P(a,n){b=()=>{"number"!==e.type&&!0===c.hasOwnProperty("value")&&delete c.value,e.modelValue!==a&&M!==a&&(M=a,!0===n&&(k=!0),t("update:modelValue",a),d((()=>{M===a&&(M=NaN)}))),b=void 0},"number"===e.type&&(v=!0,c.value=a),void 0!==e.debounce?(clearTimeout(x),c.value=a,x=setTimeout(b,e.debounce)):b()}function D(){const e=S.value;if(null!==e){const t=e.parentNode.style,{overflow:a}=e.style;t.marginBottom=e.scrollHeight-1+"px",e.style.height="1px",e.style.overflow="hidden",e.style.height=e.scrollHeight+"px",e.style.overflow=a,t.marginBottom=""}}function K(e){z(e),clearTimeout(x),void 0!==b&&b(),t("change",e.target.value)}function Q(t){void 0!==t&&w(t),clearTimeout(x),void 0!==b&&b(),v=!1,k=!1,delete c.value,"file"!==e.type&&setTimeout((()=>{null!==S.value&&(S.value.value=void 0!==R.value?R.value:"")}))}function U(){return!0===c.hasOwnProperty("value")?c.value:void 0!==R.value?R.value:""}u((()=>e.type),(()=>{S.value&&(S.value.value=e.modelValue)})),u((()=>e.modelValue),(t=>{if(!0===V.value){if(!0===k&&(k=!1,String(t)===M))return;F(t)}else R.value!==t&&(R.value=t,"number"===e.type&&!0===c.hasOwnProperty("value")&&(!0===v?v=!1:delete c.value));!0===e.autogrow&&d(D)})),u((()=>e.autogrow),(e=>{!0===e?d(D):null!==S.value&&a.rows>0&&(S.value.style.height="auto")})),u((()=>e.dense),(()=>{!0===e.autogrow&&d(D)})),g((()=>{Q()})),p((()=>{!0===e.autogrow&&D()})),Object.assign(B,{innerValue:R,fieldClass:f((()=>"q-"+(!0===T.value?"textarea":"input")+(!0===e.autogrow?" q-textarea--autogrow":""))),hasShadow:f((()=>"file"!==e.type&&"string"==typeof e.shadowText&&e.shadowText.length>0)),inputRef:S,emitValue:P,hasValue:j,floatingLabel:f((()=>!0===j.value||r(e.displayValue))),getControl:()=>h(!0===T.value?"textarea":"input",{ref:S,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...N.value,..._.value,..."file"!==e.type?{value:U()}:O.value}),getShadowControl:()=>h("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(!0===T.value?"":" text-no-wrap")},[h("span",{class:"invisible"},U()),h("span",e.shadowText)])});const H=o(B),I=y();return Object.assign(I.proxy,{focus:function(){m((()=>{const e=document.activeElement;null===S.value||S.value===e||null!==e&&e.id===B.targetUid.value||S.value.focus({preventScroll:!0})}))},select:function(){null!==S.value&&S.value.select()},getNativeElement:()=>S.value}),H}}),E=v({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const a=f((()=>"q-card__section q-card__section--"+(!0===e.horizontal?"horiz row no-wrap":"vert")));return()=>h(e.tag,{class:a.value},k(t.default))}}),O=v({name:"QCard",props:{...x,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const a=y(),n=b(e,a.proxy.$q),l=f((()=>"q-card"+(!0===n.value?" q-card--dark q-dark":"")+(!0===e.bordered?" q-card--bordered":"")+(!0===e.square?" q-card--square no-border-radius":"")+(!0===e.flat?" q-card--flat no-shadow":"")));return()=>h(e.tag,{class:l.value},k(t.default))}});export{F as Q,E as a,O as b};
